{"version":3,"sources":["main.js"],"names":["$","query","res","document","querySelectorAll","length","$things","filtered","landing","vHeight","clientHeight","modal","main","lastPos","ticking","window","addEventListener","checkView","pos","goingDown","classList","add","remove","scrollY","requestAnimationFrame","e","article","target","parentNode","querySelector","toggle","district","dataset","updateThings","filter","elem","loc","innerText","toLowerCase","indexOf","undefined","_","container","removeChildren","c","firstChild","removeChild","map","appendChild","updateString","string","nodeName","activity","acs"],"mappings":"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","file":"main.js","sourcesContent":["'use strict';\n\nlet $ = (query) => {\n  var res = document.querySelectorAll(query);\n\n  if (res.length === 1) {\n    return res[0];\n  }\n\n  return res;\n};\n\nlet $things = $('.thing');\nlet filtered;\n\nlet landing = $('.landing-wrapper');\nlet vHeight = $('.bg1').clientHeight;\nlet modal = $('.modal-wrapper');\nlet main = $('main.stay');\n\n\nlet lastPos = 0;\nlet ticking = false;\n\nwindow.addEventListener('scroll', () => {\n  let checkView = (pos) => {\n    let goingDown = () => {\n      return (lastPos < pos);\n    };\n\n    if (goingDown) {\n      if (pos > .45 * vHeight) {\n        modal.classList.add('right');\n      }\n\n      if (pos > (vHeight + 100)) {\n        landing.classList.add('inactive');\n        modal.classList.add('inactive');\n        main.classList.remove('stay');\n      }\n    }\n\n    else {\n      if (pos < vHeight) {\n        modal.classList.remove('right');\n      }\n\n      if (pos < (vHeight + 99)) {\n        landing.classList.remove('inactive');\n      }\n    }\n  };\n\n  lastPos = window.scrollY;\n  if (!ticking) {\n    window.requestAnimationFrame(() => {\n      checkView(lastPos);\n      ticking = false;\n    });\n  }\n  ticking = true;\n});\n\n$('.filtered-things').addEventListener('click', (e) => {\n  let article = e.target.parentNode.parentNode;\n  article = article.querySelector('article');\n  article.classList.toggle('hidden');\n  article.classList.toggle('fadeIn');\n});\n\n$('div.districts').addEventListener('click', (e) => {\n  let district = e.target.dataset.district;\n  let updateThings = () => {\n    let filter = (elem) => {\n      let loc = elem.querySelector('h5');\n      if (loc.innerText.toLowerCase().indexOf(district) >= 0) {\n        return elem;\n      }\n      return null;\n    };\n\n    if (filtered === undefined) {\n      filtered = _.filter($things, filter);\n    }\n    else {\n      filtered = _.filter(filtered, filter);\n    }\n\n    let container = $('.filtered-things ul');\n\n\n    let removeChildren = (c) => {\n      while (c.firstChild) {\n        c.removeChild(c.firstChild);\n      }\n    };\n\n    removeChildren(container);\n    _.map(filtered, (elem) => { container.appendChild(elem); });\n  };\n\n  let updateString = () => {\n    let string = $('span.district');\n\n    string.classList.add('active');\n    string.innerText = district;\n  };\n\n  if(e.target && e.target.nodeName === 'IMG') {\n    updateThings();\n    updateString();\n    $('div.districts').classList.toggle('hidden');\n  }\n});\n\n$('div.activities').addEventListener('click', (e) => {\n  let activity = e.target.dataset.activity;\n  let updateThings = () => {\n    let filter = (elem) => {\n      let acs = elem.dataset.activity;\n      if (acs.toLowerCase().indexOf(activity) >= 0) {\n        return elem;\n      }\n      return null;\n    };\n\n    if (filtered === undefined) {\n      filtered = _.filter($things, filter);\n    }\n    else {\n      filtered = _.filter(filtered, filter);\n    }\n\n    let container = $('.filtered-things ul');\n\n\n    let removeChildren = (c) => {\n      while (c.firstChild) {\n        c.removeChild(c.firstChild);\n      }\n    };\n\n    removeChildren(container);\n    _.map(filtered, (elem) => { container.appendChild(elem); });\n  };\n\n  let updateString = () => {\n    let string = $('span.activity');\n\n    string.classList.add('active');\n    string.innerText = activity;\n  };\n\n  if(e.target && e.target.nodeName === 'IMG') {\n    updateThings();\n    updateString();\n    $('div.activities').classList.toggle('hidden');\n  }\n});\n\n$('nav .districts.dropdown').addEventListener('click', () => {\n  $('div.districts').classList.toggle('hidden');\n});\n\n$('nav .activities.dropdown').addEventListener('click', () => {\n  $('div.activities').classList.toggle('hidden');\n});\n"],"sourceRoot":"/source/"}