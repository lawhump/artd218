{"version":3,"sources":["main.js"],"names":["$","query","res","document","querySelectorAll","length","$things","filtered","landing","vHeight","clientHeight","modal","main","$reset","lastPos","ticking","$ww","$addedWPs","$container","removeChildren","firstChild","removeChild","window","addEventListener","checkView","pos","goingDown","classList","add","remove","scrollY","requestAnimationFrame","e","addToWaypoints","thing","wp","createElement","innerText","appendChild","target","nodeName","article","parentNode","querySelector","toggle","figcaption","offsetX","offsetWidth","console","log","district","dataset","updateThings","filter","elem","loc","toLowerCase","indexOf","undefined","_","map","updateString","string","contains","activity","acs","resetString","actAc","actDis","resetThings"],"mappings":"AAAA;;AAEA,IAAIA,IAAI,SAAJA,CAAI,CAACC,KAAD,EAAW;AACjB,MAAIC,MAAMC,SAASC,gBAAT,CAA0BH,KAA1B,CAAV;;AAEA,MAAIC,IAAIG,MAAJ,KAAe,CAAnB,EAAsB;AACpB,WAAOH,IAAI,CAAJ,CAAP;AACD;;AAED,SAAOA,GAAP;AACD,CARD;;AAUA,IAAII,UAAUN,EAAE,QAAF,CAAd;AACA,IAAIO,iBAAJ;;AAEA,IAAIC,UAAUR,EAAE,kBAAF,CAAd;AACA,IAAIS,UAAUT,EAAE,MAAF,EAAUU,YAAxB;AACA,IAAIC,QAAQX,EAAE,gBAAF,CAAZ;AACA,IAAIY,OAAOZ,EAAE,WAAF,CAAX;;AAEA,IAAIa,SAASb,EAAE,yBAAF,CAAb;;AAEA,IAAIc,UAAU,CAAd;AACA,IAAIC,UAAU,KAAd;;AAEA,IAAIC,MAAMhB,EAAE,oBAAF,CAAV;AACA,IAAIiB,YAAYjB,EAAE,mBAAF,CAAhB;;AAEA,IAAIkB,aAAalB,EAAE,qBAAF,CAAjB;;AAEA,IAAImB,iBAAiB,SAAjBA,cAAiB,GAAM;AACzB,SAAOD,WAAWE,UAAlB,EAA8B;AAC5BF,eAAWG,WAAX,CAAuBH,WAAWE,UAAlC;AACD;AACF,CAJD;;AAMAE,OAAOC,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;AACtC,MAAIC,YAAY,SAAZA,SAAY,CAACC,GAAD,EAAS;AACvB,QAAIC,YAAY,SAAZA,SAAY,GAAM;AACpB,aAAQZ,UAAUW,GAAlB;AACD,KAFD;;AAIA,QAAIC,SAAJ,EAAe;AACb,UAAID,MAAM,MAAMhB,OAAhB,EAAyB;AACvBE,cAAMgB,SAAN,CAAgBC,GAAhB,CAAoB,OAApB;AACD;;AAED,UAAIH,MAAOhB,UAAU,GAArB,EAA2B;AACzBD,gBAAQmB,SAAR,CAAkBC,GAAlB,CAAsB,UAAtB;AACAjB,cAAMgB,SAAN,CAAgBC,GAAhB,CAAoB,UAApB;AACAhB,aAAKe,SAAL,CAAeE,MAAf,CAAsB,MAAtB;AACD;AACF,KAVD,MAYK;AACH,UAAIJ,MAAMhB,OAAV,EAAmB;AACjBE,cAAMgB,SAAN,CAAgBE,MAAhB,CAAuB,OAAvB;AACD;;AAED,UAAIJ,MAAOhB,UAAU,EAArB,EAA0B;AACxBD,gBAAQmB,SAAR,CAAkBE,MAAlB,CAAyB,UAAzB;AACD;AACF;AACF,GA1BD;;AA4BAf,YAAUQ,OAAOQ,OAAjB;AACA,MAAI,CAACf,OAAL,EAAc;AACZO,WAAOS,qBAAP,CAA6B,YAAM;AACjCP,gBAAUV,OAAV;AACAC,gBAAU,KAAV;AACD,KAHD;AAID;AACDA,YAAU,IAAV;AACD,CArCD;;AAuCAf,EAAE,qBAAF,EAAyBuB,gBAAzB,CAA0C,OAA1C,EAAmD,UAACS,CAAD,EAAO;AACxD,MAAIC,iBAAiB,SAAjBA,cAAiB,CAACC,KAAD,EAAW;AAC9B,QAAIC,KAAKhC,SAASiC,aAAT,CAAuB,IAAvB,CAAT;AACAD,OAAGE,SAAH,GAAeH,KAAf;AACAjB,cAAUqB,WAAV,CAAsBH,EAAtB;AACD,GAJD;;AAMA,MAAGH,EAAEO,MAAF,IAAYP,EAAEO,MAAF,CAASC,QAAT,KAAsB,KAArC,EAA4C;AAC1C,QAAIC,UAAUT,EAAEO,MAAF,CAASG,UAAT,CAAoBA,UAAlC;AACAD,cAAUA,QAAQE,aAAR,CAAsB,SAAtB,CAAV;AACAF,YAAQd,SAAR,CAAkBiB,MAAlB,CAAyB,QAAzB;AACAH,YAAQd,SAAR,CAAkBiB,MAAlB,CAAyB,QAAzB;AACD,GALD,MAOK,IAAIZ,EAAEO,MAAF,IAAYP,EAAEO,MAAF,CAASC,QAAT,KAAsB,IAAtC,EAA4C;AAC/C,QAAIK,aAAab,EAAEO,MAAF,CAASG,UAA1B;AACA,QAAIV,EAAEc,OAAF,GAAYD,WAAWE,WAA3B,EAAwC;AACtCd,qBAAeD,EAAEO,MAAF,CAASF,SAAxB;AACD;AACF,GALI,MAOA;AACHW,YAAQC,GAAR,CAAY,MAAZ;AACD;AACF,CAxBD;;AA0BAjD,EAAE,eAAF,EAAmBuB,gBAAnB,CAAoC,OAApC,EAA6C,UAACS,CAAD,EAAO;AAClD,MAAIkB,WAAWlB,EAAEO,MAAF,CAASY,OAAT,CAAiBD,QAAhC;AACA,MAAIE,eAAe,SAAfA,YAAe,GAAM;AACvB,QAAIC,SAAS,SAATA,MAAS,CAACC,IAAD,EAAU;AACrB,UAAIC,MAAMD,KAAKX,aAAL,CAAmB,IAAnB,CAAV;AACA,UAAIY,IAAIlB,SAAJ,CAAcmB,WAAd,GAA4BC,OAA5B,CAAoCP,QAApC,KAAiD,CAArD,EAAwD;AACtD,eAAOI,IAAP;AACD;AACD,aAAO,IAAP;AACD,KAND;;AAQA,QAAI/C,aAAamD,SAAjB,EAA4B;AAC1BnD,iBAAWoD,EAAEN,MAAF,CAAS/C,OAAT,EAAkB+C,MAAlB,CAAX;AACD,KAFD,MAGK;AACH9C,iBAAWoD,EAAEN,MAAF,CAAS9C,QAAT,EAAmB8C,MAAnB,CAAX;AACD;;AAEDlC;AACAwC,MAAEC,GAAF,CAAMrD,QAAN,EAAgB,UAAC+C,IAAD,EAAU;AAAEpC,iBAAWoB,WAAX,CAAuBgB,IAAvB;AAA+B,KAA3D;AACD,GAlBD;;AAoBA,MAAIO,eAAe,SAAfA,YAAe,GAAM;AACvB,QAAIC,SAAS9D,EAAE,eAAF,CAAb;;AAEA8D,WAAOnC,SAAP,CAAiBC,GAAjB,CAAqB,QAArB;AACAkC,WAAOzB,SAAP,GAAmBa,QAAnB;;AAEA,QAAIrC,OAAOc,SAAP,CAAiBoC,QAAjB,CAA0B,QAA1B,CAAJ,EAAyC;AACvClD,aAAOc,SAAP,CAAiBE,MAAjB,CAAwB,QAAxB;AACD;AACF,GATD;;AAWA,MAAGG,EAAEO,MAAF,IAAYP,EAAEO,MAAF,CAASC,QAAT,KAAsB,KAArC,EAA4C;AAC1CY;AACAS;AACA7D,MAAE,eAAF,EAAmB2B,SAAnB,CAA6BiB,MAA7B,CAAoC,QAApC;AACD;AACF,CAtCD;;AAwCA5C,EAAE,gBAAF,EAAoBuB,gBAApB,CAAqC,OAArC,EAA8C,UAACS,CAAD,EAAO;AACnD,MAAIgC,WAAWhC,EAAEO,MAAF,CAASY,OAAT,CAAiBa,QAAhC;AACA,MAAIZ,eAAe,SAAfA,YAAe,GAAM;AACvB,QAAIC,SAAS,SAATA,MAAS,CAACC,IAAD,EAAU;AACrB,UAAIW,MAAMX,KAAKH,OAAL,CAAaa,QAAvB;AACA,UAAIC,IAAIT,WAAJ,GAAkBC,OAAlB,CAA0BO,QAA1B,KAAuC,CAA3C,EAA8C;AAC5C,eAAOV,IAAP;AACD;AACD,aAAO,IAAP;AACD,KAND;;AAQA,QAAI/C,aAAamD,SAAjB,EAA4B;AAC1BnD,iBAAWoD,EAAEN,MAAF,CAAS/C,OAAT,EAAkB+C,MAAlB,CAAX;AACD,KAFD,MAGK;AACH9C,iBAAWoD,EAAEN,MAAF,CAAS9C,QAAT,EAAmB8C,MAAnB,CAAX;AACD;;AAEDlC;AACAwC,MAAEC,GAAF,CAAMrD,QAAN,EAAgB,UAAC+C,IAAD,EAAU;AAAEpC,iBAAWoB,WAAX,CAAuBgB,IAAvB;AAA+B,KAA3D;AACD,GAlBD;;AAoBA,MAAIO,eAAe,SAAfA,YAAe,GAAM;AACvB,QAAIC,SAAS9D,EAAE,eAAF,CAAb;;AAEA8D,WAAOnC,SAAP,CAAiBC,GAAjB,CAAqB,QAArB;AACAkC,WAAOzB,SAAP,GAAmB2B,QAAnB;;AAEA,QAAInD,OAAOc,SAAP,CAAiBoC,QAAjB,CAA0B,QAA1B,CAAJ,EAAyC;AACvClD,aAAOc,SAAP,CAAiBE,MAAjB,CAAwB,QAAxB;AACD;AACF,GATD;;AAWA,MAAGG,EAAEO,MAAF,IAAYP,EAAEO,MAAF,CAASC,QAAT,KAAsB,KAArC,EAA4C;AAC1CY;AACAS;AACA7D,MAAE,gBAAF,EAAoB2B,SAApB,CAA8BiB,MAA9B,CAAqC,QAArC;AACD;AACF,CAtCD;;AAwCA5C,EAAE,yBAAF,EAA6BuB,gBAA7B,CAA8C,OAA9C,EAAuD,YAAM;AAC3DvB,IAAE,eAAF,EAAmB2B,SAAnB,CAA6BiB,MAA7B,CAAoC,QAApC;AACD,CAFD;;AAIA5C,EAAE,0BAAF,EAA8BuB,gBAA9B,CAA+C,OAA/C,EAAwD,YAAM;AAC5DvB,IAAE,gBAAF,EAAoB2B,SAApB,CAA8BiB,MAA9B,CAAqC,QAArC;AACD,CAFD;;AAIA5B,IAAIO,gBAAJ,CAAqB,OAArB,EAA8B,YAAM;AAClCP,MAAIW,SAAJ,CAAciB,MAAd,CAAqB,QAArB;AACA5B,MAAI2B,aAAJ,CAAkB,YAAlB,EAAgChB,SAAhC,CAA0CiB,MAA1C,CAAiD,QAAjD;AACD,CAHD;;AAKA/B,OAAOU,gBAAP,CAAwB,OAAxB,EAAiC,YAAM;AACrC,MAAI2C,cAAc,SAAdA,WAAc,GAAM;AACtBlE,MAAE,eAAF,EAAmBqC,SAAnB,GAA+B,YAA/B;AACArC,MAAE,eAAF,EAAmBqC,SAAnB,GAA+B,QAA/B;;AAEA,QAAI8B,QAAQhE,SAASC,gBAAT,CAA0B,kBAA1B,CAAZ;AACA,QAAIgE,SAASjE,SAASC,gBAAT,CAA0B,kBAA1B,CAAb;;AAEA,QAAI+D,MAAM9D,MAAN,GAAe,CAAnB,EAAsB;AACpB8D,YAAM,CAAN,EAASxC,SAAT,CAAmBE,MAAnB,CAA0B,QAA1B;AACD;;AAED,QAAIuC,OAAO/D,MAAP,GAAgB,CAApB,EAAuB;AACrB+D,aAAO,CAAP,EAAUzC,SAAV,CAAoBE,MAApB,CAA2B,QAA3B;AACD;AACF,GAdD;;AAgBA,MAAIwC,cAAc,SAAdA,WAAc,GAAM;AACtBlD;AACAwC,MAAEC,GAAF,CAAMtD,OAAN,EAAe,UAACgD,IAAD,EAAU;AAAEpC,iBAAWoB,WAAX,CAAuBgB,IAAvB;AAA+B,KAA1D;AACD,GAHD;;AAMAY;AACAG;;AAEA9D,aAAWmD,SAAX;AACD,CA3BD","file":"main.js","sourcesContent":["'use strict';\n\nlet $ = (query) => {\n  var res = document.querySelectorAll(query);\n\n  if (res.length === 1) {\n    return res[0];\n  }\n\n  return res;\n};\n\nlet $things = $('.thing');\nlet filtered;\n\nlet landing = $('.landing-wrapper');\nlet vHeight = $('.bg1').clientHeight;\nlet modal = $('.modal-wrapper');\nlet main = $('main.stay');\n\nlet $reset = $('.filtered-things .reset');\n\nlet lastPos = 0;\nlet ticking = false;\n\nlet $ww = $('.waypoints-wrapper');\nlet $addedWPs = $('.waypoints .added');\n\nlet $container = $('.filtered-things ul');\n\nlet removeChildren = () => {\n  while ($container.firstChild) {\n    $container.removeChild($container.firstChild);\n  }\n};\n\nwindow.addEventListener('scroll', () => {\n  let checkView = (pos) => {\n    let goingDown = () => {\n      return (lastPos < pos);\n    };\n\n    if (goingDown) {\n      if (pos > .45 * vHeight) {\n        modal.classList.add('right');\n      }\n\n      if (pos > (vHeight + 100)) {\n        landing.classList.add('inactive');\n        modal.classList.add('inactive');\n        main.classList.remove('stay');\n      }\n    }\n\n    else {\n      if (pos < vHeight) {\n        modal.classList.remove('right');\n      }\n\n      if (pos < (vHeight + 99)) {\n        landing.classList.remove('inactive');\n      }\n    }\n  };\n\n  lastPos = window.scrollY;\n  if (!ticking) {\n    window.requestAnimationFrame(() => {\n      checkView(lastPos);\n      ticking = false;\n    });\n  }\n  ticking = true;\n});\n\n$('.filtered-things ul').addEventListener('click', (e) => {\n  let addToWaypoints = (thing) => {\n    let wp = document.createElement('LI');\n    wp.innerText = thing;\n    $addedWPs.appendChild(wp);\n  };\n\n  if(e.target && e.target.nodeName === 'IMG') {\n    let article = e.target.parentNode.parentNode;\n    article = article.querySelector('article');\n    article.classList.toggle('hidden');\n    article.classList.toggle('fadeIn');\n  }\n\n  else if (e.target && e.target.nodeName === 'H3') {\n    let figcaption = e.target.parentNode;\n    if (e.offsetX > figcaption.offsetWidth) {\n      addToWaypoints(e.target.innerText);\n    }\n  }\n\n  else {\n    console.log('bink');\n  }\n});\n\n$('div.districts').addEventListener('click', (e) => {\n  let district = e.target.dataset.district;\n  let updateThings = () => {\n    let filter = (elem) => {\n      let loc = elem.querySelector('h5');\n      if (loc.innerText.toLowerCase().indexOf(district) >= 0) {\n        return elem;\n      }\n      return null;\n    };\n\n    if (filtered === undefined) {\n      filtered = _.filter($things, filter);\n    }\n    else {\n      filtered = _.filter(filtered, filter);\n    }\n\n    removeChildren();\n    _.map(filtered, (elem) => { $container.appendChild(elem); });\n  };\n\n  let updateString = () => {\n    let string = $('span.district');\n\n    string.classList.add('active');\n    string.innerText = district;\n\n    if ($reset.classList.contains('hidden')) {\n      $reset.classList.remove('hidden');\n    }\n  };\n\n  if(e.target && e.target.nodeName === 'IMG') {\n    updateThings();\n    updateString();\n    $('div.districts').classList.toggle('hidden');\n  }\n});\n\n$('div.activities').addEventListener('click', (e) => {\n  let activity = e.target.dataset.activity;\n  let updateThings = () => {\n    let filter = (elem) => {\n      let acs = elem.dataset.activity;\n      if (acs.toLowerCase().indexOf(activity) >= 0) {\n        return elem;\n      }\n      return null;\n    };\n\n    if (filtered === undefined) {\n      filtered = _.filter($things, filter);\n    }\n    else {\n      filtered = _.filter(filtered, filter);\n    }\n\n    removeChildren();\n    _.map(filtered, (elem) => { $container.appendChild(elem); });\n  };\n\n  let updateString = () => {\n    let string = $('span.activity');\n\n    string.classList.add('active');\n    string.innerText = activity;\n\n    if ($reset.classList.contains('hidden')) {\n      $reset.classList.remove('hidden');\n    }\n  };\n\n  if(e.target && e.target.nodeName === 'IMG') {\n    updateThings();\n    updateString();\n    $('div.activities').classList.toggle('hidden');\n  }\n});\n\n$('nav .districts.dropdown').addEventListener('click', () => {\n  $('div.districts').classList.toggle('hidden');\n});\n\n$('nav .activities.dropdown').addEventListener('click', () => {\n  $('div.activities').classList.toggle('hidden');\n});\n\n$ww.addEventListener('click', () => {\n  $ww.classList.toggle('active');\n  $ww.querySelector('.waypoints').classList.toggle('hidden');\n});\n\n$reset.addEventListener('click', () => {\n  let resetString = () => {\n    $('span.activity').innerText = 'What to do';\n    $('span.district').innerText = 'Austin';\n\n    let actAc = document.querySelectorAll('.active.activity');\n    let actDis = document.querySelectorAll('.active.district');\n\n    if (actAc.length > 0) {\n      actAc[0].classList.remove('active');\n    }\n\n    if (actDis.length > 0) {\n      actDis[0].classList.remove('active');\n    }\n  };\n\n  let resetThings = () => {\n    removeChildren();\n    _.map($things, (elem) => { $container.appendChild(elem); });\n  };\n\n\n  resetString();\n  resetThings();\n\n  filtered = undefined;\n});\n"],"sourceRoot":"/source/"}